<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISP Billing System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.21.2/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        // Demo data for our application
        const demoClients = [
            { id: 1, name: "John Smith", email: "john@example.com", phone: "555-1234", address: "123 Main St", connectionType: "pppoe", username: "john_pppoe", password: "pass123", plan: "Basic", status: "Active", balance: 20.00, lastPaid: "2025-05-01", ipAddress: "10.0.0.101" },
            { id: 2, name: "Jane Doe", email: "jane@example.com", phone: "555-5678", address: "456 Oak Ave", connectionType: "hotspot", username: "jane_hotspot", password: "pass456", plan: "Premium", status: "Active", balance: 50.00, lastPaid: "2025-05-10", ipAddress: "10.0.0.102" },
            { id: 3, name: "Robert Johnson", email: "robert@example.com", phone: "555-9012", address: "789 Pine Rd", connectionType: "pppoe", username: "robert_pppoe", password: "pass789", plan: "Ultimate", status: "Suspended", balance: -10.00, lastPaid: "2025-04-15", ipAddress: "10.0.0.103" },
            { id: 4, name: "Sarah Williams", email: "sarah@example.com", phone: "555-3456", address: "321 Elm St", connectionType: "hotspot", username: "sarah_hotspot", password: "pass321", plan: "Basic", status: "Active", balance: 5.00, lastPaid: "2025-05-05", ipAddress: "10.0.0.104" },
            { id: 5, name: "Michael Brown", email: "michael@example.com", phone: "555-7890", address: "654 Cedar Ln", connectionType: "pppoe", username: "michael_pppoe", password: "pass654", plan: "Premium", status: "Inactive", balance: 0.00, lastPaid: "2025-04-20", ipAddress: "10.0.0.105" },
        ];

        const demoPlans = [
            { id: 1, name: "Basic", price: 29.99, download: 10, upload: 2, connectionType: "both", description: "Basic internet for browsing and emails" },
            { id: 2, name: "Premium", price: 49.99, download: 25, upload: 5, connectionType: "both", description: "Family plan with HD streaming" },
            { id: 3, name: "Ultimate", price: 79.99, download: 100, upload: 20, connectionType: "pppoe", description: "Ultra-fast fiber connection" },
            { id: 4, name: "Business", price: 149.99, download: 200, upload: 50, connectionType: "pppoe", description: "For small businesses with dedicated IP" },
            { id: 5, name: "Hotspot Basic", price: 19.99, download: 5, upload: 1, connectionType: "hotspot", description: "Public Wi-Fi access" },
        ];

        const demoPayments = [
            { id: 1, clientId: 1, amount: 29.99, date: "2025-05-01", method: "Credit Card", reference: "TX123456" },
            { id: 2, clientId: 2, amount: 49.99, date: "2025-05-10", method: "Bank Transfer", reference: "BT789012" },
            { id: 3, clientId: 3, amount: 79.99, date: "2025-04-15", method: "PayPal", reference: "PP345678" },
            { id: 4, clientId: 4, amount: 29.99, date: "2025-05-05", method: "Cash", reference: "CA901234" },
            { id: 5, clientId: 5, amount: 49.99, date: "2025-04-20", method: "Credit Card", reference: "TX567890" },
        ];

        const App = () => {
            const [activeTab, setActiveTab] = React.useState('dashboard');
            const [clients, setClients] = React.useState(demoClients);
            const [plans, setPlans] = React.useState(demoPlans);
            const [payments, setPayments] = React.useState(demoPayments);
            const [selectedClient, setSelectedClient] = React.useState(null);
            const [mikrotikConfig, setMikrotikConfig] = React.useState({
                ipAddress: '192.168.88.1',
                username: 'admin',
                password: '',
                apiPort: 8728,
                status: 'Disconnected'
            });
            const [newClientForm, setNewClientForm] = React.useState({
                name: '',
                email: '',
                phone: '',
                address: '',
                connectionType: 'pppoe',
                username: '',
                password: '',
                plan: 'Basic'
            });
            const [searchTerm, setSearchTerm] = React.useState('');
            const [alertMessage, setAlertMessage] = React.useState('');
            const [showAlert, setShowAlert] = React.useState(false);

            // Show alert message
            const showAlertMessage = (message) => {
                setAlertMessage(message);
                setShowAlert(true);
                setTimeout(() => setShowAlert(false), 3000);
            };

            // Add a new client
            const addClient = () => {
                const newClient = {
                    id: clients.length + 1,
                    ...newClientForm,
                    status: 'Active',
                    balance: 0,
                    lastPaid: moment().format('YYYY-MM-DD'),
                    ipAddress: `10.0.0.${100 + clients.length + 1}`
                };
                
                setClients([...clients, newClient]);
                setNewClientForm({
                    name: '',
                    email: '',
                    phone: '',
                    address: '',
                    connectionType: 'pppoe',
                    username: '',
                    password: '',
                    plan: 'Basic'
                });
                showAlertMessage('Client added successfully!');
            };

            // Update client status
            const updateClientStatus = (id, status) => {
                const updatedClients = clients.map(client => 
                    client.id === id ? {...client, status} : client
                );
                setClients(updatedClients);
                showAlertMessage(`Client status updated to ${status}`);
                
                // If we're updating the selected client, update the selection too
                if (selectedClient && selectedClient.id === id) {
                    setSelectedClient({...selectedClient, status});
                }
            };

            // Add a payment
            const addPayment = (clientId, amount) => {
                const newPayment = {
                    id: payments.length + 1,
                    clientId,
                    amount: parseFloat(amount),
                    date: moment().format('YYYY-MM-DD'),
                    method: 'Cash',
                    reference: `TX${Math.floor(Math.random() * 1000000)}`
                };
                
                // Update payments
                setPayments([...payments, newPayment]);
                
                // Update client balance
                const updatedClients = clients.map(client => 
                    client.id === clientId ? 
                    {...client, balance: client.balance + parseFloat(amount), lastPaid: moment().format('YYYY-MM-DD')} : 
                    client
                );
                setClients(updatedClients);
                
                // If we're updating the selected client, update the selection too
                if (selectedClient && selectedClient.id === clientId) {
                    const updatedClient = updatedClients.find(c => c.id === clientId);
                    setSelectedClient(updatedClient);
                }
                
                showAlertMessage(`Payment of $${amount} added successfully!`);
            };

            // Connect to Mikrotik router
            const connectMikrotik = () => {
                // In a real implementation, this would use the Mikrotik API
                // For demo purposes, we'll simulate a connection
                setMikrotikConfig({...mikrotikConfig, status: 'Connected'});
                showAlertMessage('Connected to Mikrotik router!');
            };

            // Synchronize clients with Mikrotik
            const syncWithMikrotik = () => {
                // In a real implementation, this would use the Mikrotik API to push configurations
                // For demo purposes, we'll simulate synchronization
                showAlertMessage('Synchronized clients with Mikrotik router!');
            };

            // Filter clients based on search term
            const filteredClients = clients.filter(client => 
                client.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                client.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
                client.username.toLowerCase().includes(searchTerm.toLowerCase())
            );

            // Calculate monthly revenue
            const monthlyRevenue = React.useMemo(() => {
                return plans.reduce((sum, plan) => {
                    const clientsOnPlan = clients.filter(client => client.plan === plan.name && client.status === 'Active').length;
                    return sum + (plan.price * clientsOnPlan);
                }, 0);
            }, [clients, plans]);

            // Get client payments
            const getClientPayments = (clientId) => {
                return payments.filter(payment => payment.clientId === clientId);
            };

            // Get client plan details
            const getClientPlan = (planName) => {
                return plans.find(plan => plan.name === planName);
            };

            // Handle form input changes
            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setNewClientForm({...newClientForm, [name]: value});
            };

            // Generate Mikrotik configuration for a client
            const generateMikrotikConfig = (client) => {
                const plan = getClientPlan(client.plan);
                if (client.connectionType === 'pppoe') {
                    return `
# PPPoE Configuration for ${client.name}
/ppp secret add name="${client.username}" password="${client.password}" service=pppoe profile="pppoe-${client.plan}"
/queue simple add name="${client.name}" target="${client.username}" max-limit="${plan.upload}M/${plan.download}M"
                    `;
                } else {
                    return `
# Hotspot Configuration for ${client.name}
/ip hotspot user add name="${client.username}" password="${client.password}" profile="hotspot-${client.plan}"
/queue simple add name="${client.name}" target="${client.ipAddress}" max-limit="${plan.upload}M/${plan.download}M"
                    `;
                }
            };

            // Dashboard Component
            const Dashboard = () => (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
                    <div className="bg-white shadow rounded-lg p-6">
                        <h3 className="text-lg font-semibold mb-2">Client Summary</h3>
                        <div className="flex justify-between items-center mb-2">
                            <span>Total Clients:</span>
                            <span className="font-bold">{clients.length}</span>
                        </div>
                        <div className="flex justify-between items-center mb-2">
                            <span>Active Clients:</span>
                            <span className="font-bold">{clients.filter(c => c.status === 'Active').length}</span>
                        </div>
                        <div className="flex justify-between items-center mb-2">
                            <span>Suspended Clients:</span>
                            <span className="font-bold">{clients.filter(c => c.status === 'Suspended').length}</span>
                        </div>
                        <div className="flex justify-between items-center">
                            <span>Inactive Clients:</span>
                            <span className="font-bold">{clients.filter(c => c.status === 'Inactive').length}</span>
                        </div>
                    </div>
                    
                    <div className="bg-white shadow rounded-lg p-6">
                        <h3 className="text-lg font-semibold mb-2">Financial Summary</h3>
                        <div className="flex justify-between items-center mb-2">
                            <span>Monthly Revenue:</span>
                            <span className="font-bold">${monthlyRevenue.toFixed(2)}</span>
                        </div>
                        <div className="flex justify-between items-center mb-2">
                            <span>Current Month Payments:</span>
                            <span className="font-bold">
                                ${payments.filter(p => moment(p.date).month() === moment().month()).reduce((sum, p) => sum + p.amount, 0).toFixed(2)}
                            </span>
                        </div>
                        <div className="flex justify-between items-center">
                            <span>Overdue Accounts:</span>
                            <span className="font-bold">{clients.filter(c => c.balance < 0).length}</span>
                        </div>
                    </div>
                    
                    <div className="bg-white shadow rounded-lg p-6">
                        <h3 className="text-lg font-semibold mb-2">Connection Types</h3>
                        <div className="flex justify-between items-center mb-2">
                            <span>PPPoE Clients:</span>
                            <span className="font-bold">{clients.filter(c => c.connectionType === 'pppoe').length}</span>
                        </div>
                        <div className="flex justify-between items-center mb-2">
                            <span>Hotspot Clients:</span>
                            <span className="font-bold">{clients.filter(c => c.connectionType === 'hotspot').length}</span>
                        </div>
                    </div>
                    
                    <div className="bg-white shadow rounded-lg p-6 md:col-span-2 lg:col-span-3">
                        <h3 className="text-lg font-semibold mb-2">Recent Activity</h3>
                        <div className="overflow-x-auto">
                            <table className="min-w-full">
                                <thead>
                                    <tr className="bg-gray-100">
                                        <th className="py-2 px-4 text-left">Date</th>
                                        <th className="py-2 px-4 text-left">Client</th>
                                        <th className="py-2 px-4 text-left">Activity</th>
                                        <th className="py-2 px-4 text-left">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {payments.slice(0, 5).map(payment => {
                                        const client = clients.find(c => c.id === payment.clientId);
                                        return (
                                            <tr key={payment.id} className="border-b">
                                                <td className="py-2 px-4">{payment.date}</td>
                                                <td className="py-2 px-4">{client ? client.name : 'Unknown'}</td>
                                                <td className="py-2 px-4">Payment received</td>
                                                <td className="py-2 px-4">${payment.amount.toFixed(2)}</td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );

            // Clients Component
            const Clients = () => (
                <div className="bg-white shadow rounded-lg p-6 mb-6">
                    <div className="flex justify-between items-center mb-4">
                        <h3 className="text-lg font-semibold">Clients</h3>
                        <div className="flex gap-2">
                            <input 
                                type="text" 
                                placeholder="Search clients..." 
                                className="border rounded px-3 py-1"
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                            />
                            <button 
                                className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-1 rounded"
                                onClick={() => setActiveTab('addClient')}
                            >
                                Add Client
                            </button>
                        </div>
                    </div>
                    
                    <div className="overflow-x-auto">
                        <table className="min-w-full">
                            <thead>
                                <tr className="bg-gray-100">
                                    <th className="py-2 px-4 text-left">Name</th>
                                    <th className="py-2 px-4 text-left">Email</th>
                                    <th className="py-2 px-4 text-left">Type</th>
                                    <th className="py-2 px-4 text-left">Plan</th>
                                    <th className="py-2 px-4 text-left">Status</th>
                                    <th className="py-2 px-4 text-left">Balance</th>
                                    <th className="py-2 px-4 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {filteredClients.map(client => (
                                    <tr key={client.id} className="border-b">
                                        <td className="py-2 px-4">{client.name}</td>
                                        <td className="py-2 px-4">{client.email}</td>
                                        <td className="py-2 px-4">{client.connectionType}</td>
                                        <td className="py-2 px-4">{client.plan}</td>
                                        <td className="py-2 px-4">
                                            <span className={`inline-block px-2 py-1 text-xs rounded ${
                                                client.status === 'Active' ? 'bg-green-100 text-green-800' :
                                                client.status === 'Suspended' ? 'bg-red-100 text-red-800' :
                                                'bg-gray-100 text-gray-800'
                                            }`}>
                                                {client.status}
                                            </span>
                                        </td>
                                        <td className="py-2 px-4" style={{ color: client.balance < 0 ? 'red' : 'inherit' }}>
                                            ${client.balance.toFixed(2)}
                                        </td>
                                        <td className="py-2 px-4">
                                            <button 
                                                className="text-blue-500 hover:text-blue-700 mr-2"
                                                onClick={() => {
                                                    setSelectedClient(client);
                                                    setActiveTab('clientDetails');
                                                }}
                                            >
                                                View
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );

            // Client Details Component
            const ClientDetails = () => {
                const [amount, setAmount] = React.useState('');
                
                if (!selectedClient) {
                    return (
                        <div className="bg-white shadow rounded-lg p-6 mb-6 text-center">
                            No client selected
                        </div>
                    );
                }
                
                const clientPlan = getClientPlan(selectedClient.plan);
                const clientPayments = getClientPayments(selectedClient.id);
                
                return (
                    <div className="bg-white shadow rounded-lg p-6 mb-6">
                        <div className="flex justify-between items-center mb-4">
                            <div className="flex items-center">
                                <button 
                                    className="mr-2 text-gray-500"
                                    onClick={() => setActiveTab('clients')}
                                >
                                    ← Back
                                </button>
                                <h3 className="text-lg font-semibold">Client Details: {selectedClient.name}</h3>
                            </div>
                            <div className="flex space-x-2">
                                <button 
                                    className={`px-3 py-1 rounded ${
                                        selectedClient.status === 'Active' ? 'bg-red-500 hover:bg-red-600 text-white' : 'bg-green-500 hover:bg-green-600 text-white'
                                    }`}
                                    onClick={() => updateClientStatus(selectedClient.id, selectedClient.status === 'Active' ? 'Suspended' : 'Active')}
                                >
                                    {selectedClient.status === 'Active' ? 'Suspend' : 'Activate'}
                                </button>
                            </div>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 className="font-semibold mb-2">Personal Information</h4>
                                <div className="mb-4">
                                    <p><strong>Email:</strong> {selectedClient.email}</p>
                                    <p><strong>Phone:</strong> {selectedClient.phone}</p>
                                    <p><strong>Address:</strong> {selectedClient.address}</p>
                                </div>
                                
                                <h4 className="font-semibold mb-2">Connection Details</h4>
                                <div className="mb-4">
                                    <p><strong>Type:</strong> {selectedClient.connectionType}</p>
                                    <p><strong>Username:</strong> {selectedClient.username}</p>
                                    <p><strong>Password:</strong> {selectedClient.password}</p>
                                    <p><strong>IP Address:</strong> {selectedClient.ipAddress}</p>
                                </div>
                                
                                <h4 className="font-semibold mb-2">Plan Details</h4>
                                <div className="mb-4">
                                    <p><strong>Plan:</strong> {selectedClient.plan}</p>
                                    {clientPlan && (
                                        <>
                                            <p><strong>Download Speed:</strong> {clientPlan.download} Mbps</p>
                                            <p><strong>Upload Speed:</strong> {clientPlan.upload} Mbps</p>
                                            <p><strong>Monthly Price:</strong> ${clientPlan.price.toFixed(2)}</p>
                                        </>
                                    )}
                                </div>
                            </div>
                            
                            <div>
                                <h4 className="font-semibold mb-2">Billing Information</h4>
                                <div className="mb-4">
                                    <p><strong>Current Balance:</strong> <span style={{ color: selectedClient.balance < 0 ? 'red' : 'inherit' }}>${selectedClient.balance.toFixed(2)}</span></p>
                                    <p><strong>Last Payment:</strong> {selectedClient.lastPaid}</p>
                                    <p><strong>Status:</strong> {selectedClient.status}</p>
                                </div>
                                
                                <h4 className="font-semibold mb-2">Add Payment</h4>
                                <div className="flex mb-4">
                                    <input 
                                        type="number" 
                                        min="0" 
                                        step="0.01" 
                                        className="border rounded px-3 py-1 mr-2 w-32"
                                        placeholder="Amount"
                                        value={amount}
                                        onChange={(e) => setAmount(e.target.value)}
                                    />
                                    <button 
                                        className="bg-green-500 hover:bg-green-600 text-white px-4 py-1 rounded"
                                        onClick={() => {
                                            if (amount && parseFloat(amount) > 0) {
                                                addPayment(selectedClient.id, amount);
                                                setAmount('');
                                            }
                                        }}
                                    >
                                        Add Payment
                                    </button>
                                </div>
                                
                                <h4 className="font-semibold mb-2">Recent Payments</h4>
                                <div className="overflow-y-auto max-h-48">
                                    <table className="min-w-full">
                                        <thead>
                                            <tr className="bg-gray-100">
                                                <th className="py-2 px-4 text-left">Date</th>
                                                <th className="py-2 px-4 text-left">Amount</th>
                                                <th className="py-2 px-4 text-left">Method</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {clientPayments.length > 0 ? (
                                                clientPayments.map(payment => (
                                                    <tr key={payment.id} className="border-b">
                                                        <td className="py-2 px-4">{payment.date}</td>
                                                        <td className="py-2 px-4">${payment.amount.toFixed(2)}</td>
                                                        <td className="py-2 px-4">{payment.method}</td>
                                                    </tr>
                                                ))
                                            ) : (
                                                <tr>
                                                    <td colSpan="3" className="py-2 px-4 text-center">No payments found</td>
                                                </tr>
                                            )}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <div className="mt-6">
                            <h4 className="font-semibold mb-2">Mikrotik Configuration</h4>
                            <div className="bg-gray-100 p-4 rounded overflow-auto">
                                <pre>{generateMikrotikConfig(selectedClient)}</pre>
                            </div>
                        </div>
                    </div>
                );
            };

            // Add Client Component
            const AddClient = () => (
                <div className="bg-white shadow rounded-lg p-6 mb-6">
                    <div className="flex items-center mb-4">
                        <button 
                            className="mr-2 text-gray-500"
                            onClick={() => setActiveTab('clients')}
                        >
                            ← Back
                        </button>
                        <h3 className="text-lg font-semibold">Add New Client</h3>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 className="font-semibold mb-2">Personal Information</h4>
                            <div className="mb-4">
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Name</label>
                                    <input 
                                        type="text" 
                                        name="name"
                                        className="border rounded px-3 py-2 w-full"
                                        value={newClientForm.name}
                                        onChange={handleInputChange}
                                    />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Email</label>
                                    <input 
                                        type="email" 
                                        name="email"
                                        className="border rounded px-3 py-2 w-full"
                                        value={newClientForm.email}
                                        onChange={handleInputChange}
                                    />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Phone</label>
                                    <input 
                                        type="text" 
                                        name="phone"
                                        className="border rounded px-3 py-2 w-full"
                                        value={newClientForm.phone}
                                        onChange={handleInputChange}
                                    />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Address</label>
                                    <input 
                                        type="text" 
                                        name="address"
                                        className="border rounded px-3 py-2 w-full"
                                        value={newClientForm.address}
                                        onChange={handleInputChange}
                                    />
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 className="font-semibold mb-2">Connection Details</h4>
                            <div className="mb-4">
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Connection Type</label>
                                    <select 
                                        name="connectionType"
                                        className="border rounded px-3 py-2 w-full"
                                        value={newClientForm.connectionType}
                                        onChange={handleInputChange}
                                    >
                                        <option value="pppoe">PPPoE</option>
                                        <option value="hotspot">Hotspot</option>
                                    </select>
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Username</label>
                                    <input 
                                        type="text" 
                                        name="username"
                                        className="border rounded px-3 py-2 w-full"
                                        value={newClientForm.username}
                                        onChange={handleInputChange}
                                    />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Password</label>
                                    <input 
                                        type="password" 
                                        name="password"
                                        className="border rounded px-3 py-2 w-full"
                                        value={newClientForm.password}
                                        onChange={handleInputChange}
                                    />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Plan</label>
                                    <select 
                                        name="plan"
                                        className="border rounded px-3 py-2 w-full"
                                        value={newClientForm.plan}
                                        onChange={handleInputChange}
                                    >
                                        {plans.filter(plan => 
                                            plan.connectionType === 'both' || 
                                            plan.connectionType === newClientForm.connectionType
                                        ).map(plan => (
                                            <option key={plan.id} value={plan.name}>{plan.name}</option>
                                        ))}
                                    </select>
                                </div>
                            </div>
                            
                            <div className="mt-6">
                                <button 
                                    className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"
                                    onClick={addClient}
                                >
                                    Add Client
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Plans Component
            const Plans = () => (
                <div className="bg-white shadow rounded-lg p-6 mb-6">
                    <h3 className="text-lg font-semibold mb-4">Internet Plans</h3>
                    
                    <div className="overflow-x-auto">
                        <table className="min-w-full">
                            <thead>
                                <tr className="bg-gray-100">
                                    <th className="py-2 px-4 text-left">Name</th>
                                    <th className="py-2 px-4 text-left">Price</th>
                                    <th className="py-2 px-4 text-left">Download</th>
                                    <th className="py-2 px-4 text-left">Upload</th>
                                    <th className="py-2 px-4 text-left">Type</th>
                                    <th className="py-2 px-4 text-left">Description</th>
                                    <th className="py-2 px-4 text-left">Active Clients</th>
                                </tr>
                            </thead>
                            <tbody>
                                {plans.map(plan => (
                                    <tr key={plan.id} className="border-b">
                                        <td className="py-2 px-4">{plan.name}</td>
                                        <td className="py-2 px-4">${plan.price.toFixed(2)}</td>
                                        <td className="py-2 px-4">{plan.download} Mbps</td>
                                        <td className="py-2 px-4">{plan.upload} Mbps</td>
                                        <td className="py-2 px-4">{plan.connectionType === 'both' ? 'PPPoE & Hotspot' : plan.connectionType}</td>
                                        <td className="py-2 px-4">{plan.description}</td>
                                        <td className="py-2 px-4">
                                            {clients.filter(c => c.plan === plan.name && c.status === 'Active').length}
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );

            // Payments Component
            const Payments = () => (
                <div className="bg-white shadow rounded-lg p-6 mb-6">
                    <h3 className="text-lg font-semibold mb-4">All Payments</h3>
                    
                    <div className="overflow-x-auto">
                        <table className="min-w-full">
                            <thead>
                                <tr className="bg-gray-100">
                                    <th className="py-2 px-4 text-left">Date</th>
                                    <th className="py-2 px-4 text-left">Client</th>
                                    <th className="py-2 px-4 text-left">Amount</th>
                                    <th className="py-2 px-4 text-left">Method</th>
                                    <th className="py-2 px-4 text-left">Reference</th>
                                </tr>
                            </thead>
                            <tbody>
                                {payments.map(payment => {
                                    const client = clients.find(c => c.id === payment.clientId);
                                    return (
                                        <tr key={payment.id} className="border-b">
                                            <td className="py-2 px-4">{payment.date}</td>
                                            <td className="py-2 px-4">{client ? client.name : 'Unknown'}</td>
                                            <td className="py-2 px-4">${payment.amount.toFixed(2)}</td>
                                            <td className="py-2 px-4">{payment.method}</td>
                                            <td className="py-2 px-4">{payment.reference}</td>
                                        </tr>
                                    );
                                })}
                            </tbody>
                        </table>
                    </div>
                </div>
            );

            // MikrotikSetup Component
            const MikrotikSetup = () => (
                <div className="bg-white shadow rounded-lg p-6 mb-6">
                    <h3 className="text-lg font-semibold mb-4">Mikrotik Router Integration</h3>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 className="font-semibold mb-2">Router Configuration</h4>
                            <div className="mb-4">
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">IP Address</label>
                                    <input 
                                        type="text" 
                                        className="border rounded px-3 py-2 w-full"
                                        value={mikrotikConfig.ipAddress}
                                        onChange={(e) => setMikrotikConfig({...mikrotikConfig, ipAddress: e.target.value})}
                                    />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Username</label>
                                    <input 
                                        type="text" 
                                        className="border rounded px-3 py-2 w-full"
                                        value={mikrotikConfig.username}
                                        onChange={(e) => setMikrotikConfig({...mikrotikConfig, username: e.target.value})}
                                    />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Password</label>
                                    <input 
                                        type="password" 
                                        className="border rounded px-3 py-2 w-full"
                                        value={mikrotikConfig.password}
                                        onChange={(e) => setMikrotikConfig({...mikrotikConfig, password: e.target.value})}
                                    />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">API Port</label>
                                    <input 
                                        type="number" 
                                        className="border rounded px-3 py-2 w-full"
                                        value={mikrotikConfig.apiPort}
                                        onChange={(e) => setMikrotikConfig({...mikrotikConfig, apiPort: e.target.value})}
                                    />
                                </div>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium mb-1">Status</label>
                                    <div className={`inline-block px-3 py-1 rounded ${
                                        mikrotikConfig.status === 'Connected' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                                    }`}>
                                        {mikrotikConfig.status}
                                    </div>
                                </div>
                                <div className="flex space-x-2">
                                    <button 
                                        className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"
                                        onClick={connectMikrotik}
                                    >
                                        Connect
                                    </button>
                                    <button 
                                        className="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded"
                                        onClick={syncWithMikrotik}
                                        disabled={mikrotikConfig.status !== 'Connected'}
                                    >
                                        Sync Clients
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 className="font-semibold mb-2">Mikrotik Plan Templates</h4>
                            <div className="bg-gray-100 p-4 rounded overflow-auto h-64">
                                <pre>{`# PPPoE Profile Templates
/ppp profile
add name="pppoe-Basic" rate-limit=2M/10M
add name="pppoe-Premium" rate-limit=5M/25M
add name="pppoe-Ultimate" rate-limit=20M/100M
add name="pppoe-Business" rate-limit=50M/200M

# Hotspot Profile Templates
/ip hotspot user profile
add name="hotspot-Basic" rate-limit=2M/10M
add name="hotspot-Premium" rate-limit=5M/25M
add name="hotspot-Hotspot Basic" rate-limit=1M/5M

# Queue Types
/queue type
add kind=pcq name=pcq-upload pcq-classifier=src-address
add kind=pcq name=pcq-download pcq-classifier=dst-address

# Simple Queue Template for User Rate Limiting
/queue simple
add name="Default" target=192.168.0.0/16 max-limit=10M/25M`}</pre>
                            </div>
                            
                            <div className="mt-4">
                                <h4 className="font-semibold mb-2">Required Setup</h4>
                                <ul className="list-disc pl-5">
                                    <li>PPPoE Server must be configured on Mikrotik</li>
                                    <li>Hotspot must be set up if using hotspot clients</li>
                                    <li>The API service must be enabled on the router</li>
                                    <li>IP Firewall rules should be configured for proper traffic management</li>
                                    <li>DHCP server should be configured for local network</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Reports Component
            const Reports = () => {
                // Monthly revenue data
                const monthlyData = React.useMemo(() => {
                    const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
                    return months.map((month, index) => {
                        // Mock data - in real system this would be from database
                        const mockRevenue = Math.floor(Math.random() * 5000) + monthlyRevenue - 2000;
                        return {
                            name: month,
                            revenue: mockRevenue > 0 ? mockRevenue : monthlyRevenue
                        };
                    });
                }, [monthlyRevenue]);

                // Client type distribution
                const clientTypeData = React.useMemo(() => {
                    const pppoeClients = clients.filter(c => c.connectionType === 'pppoe').length;
                    const hotspotClients = clients.filter(c => c.connectionType === 'hotspot').length;
                    return [
                        { name: 'PPPoE', value: pppoeClients },
                        { name: 'Hotspot', value: hotspotClients }
                    ];
                }, [clients]);

                // Client plan distribution
                const planData = React.useMemo(() => {
                    const planCounts = {};
                    clients.forEach(client => {
                        if (planCounts[client.plan]) {
                            planCounts[client.plan]++;
                        } else {
                            planCounts[client.plan] = 1;
                        }
                    });
                    
                    return Object.entries(planCounts).map(([name, value]) => ({ name, value }));
                }, [clients]);

                return (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div className="bg-white shadow rounded-lg p-6">
                            <h3 className="text-lg font-semibold mb-4">Monthly Revenue</h3>
                            <div className="h-64">
                                <canvas id="revenueChart"></canvas>
                            </div>
                            {React.useEffect(() => {
                                const ctx = document.getElementById('revenueChart').getContext('2d');
                                const chart = new Chart(ctx, {
                                    type: 'bar',
                                    data: {
                                        labels: monthlyData.map(d => d.name),
                                        datasets: [{
                                            label: 'Revenue',
                                            data: monthlyData.map(d => d.revenue),
                                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                                            borderColor: 'rgba(54, 162, 235, 1)',
                                            borderWidth: 1
                                        }]
                                    },
                                    options: {
                                        responsive: true,
                                        maintainAspectRatio: false,
                                        scales: {
                                            y: {
                                                beginAtZero: true,
                                                title: {
                                                    display: true,
                                                    text: 'Revenue ($)'
                                                }
                                            }
                                        }
                                    }
                                });
                                
                                return () => chart.destroy();
                            }, [monthlyData]), null}
                        </div>
                        
                        <div className="bg-white shadow rounded-lg p-6">
                            <h3 className="text-lg font-semibold mb-4">Client Distribution by Type</h3>
                            <div className="h-64">
                                <canvas id="clientTypeChart"></canvas>
                            </div>
                            {React.useEffect(() => {
                                const ctx = document.getElementById('clientTypeChart').getContext('2d');
                                const chart = new Chart(ctx, {
                                    type: 'pie',
                                    data: {
                                        labels: clientTypeData.map(d => d.name),
                                        datasets: [{
                                            data: clientTypeData.map(d => d.value),
                                            backgroundColor: [
                                                'rgba(255, 99, 132, 0.5)',
                                                'rgba(54, 162, 235, 0.5)'
                                            ],
                                            borderColor: [
                                                'rgba(255, 99, 132, 1)',
                                                'rgba(54, 162, 235, 1)'
                                            ],
                                            borderWidth: 1
                                        }]
                                    },
                                    options: {
                                        responsive: true,
                                        maintainAspectRatio: false
                                    }
                                });
                                
                                return () => chart.destroy();
                            }, [clientTypeData]), null}
                        </div>
                        
                        <div className="bg-white shadow rounded-lg p-6">
                            <h3 className="text-lg font-semibold mb-4">Client Distribution by Plan</h3>
                            <div className="h-64">
                                <canvas id="planChart"></canvas>
                            </div>
                            {React.useEffect(() => {
                                const ctx = document.getElementById('planChart').getContext('2d');
                                const chart = new Chart(ctx, {
                                    type: 'pie',
                                    data: {
                                        labels: planData.map(d => d.name),
                                        datasets: [{
                                            data: planData.map(d => d.value),
                                            backgroundColor: [
                                                'rgba(255, 99, 132, 0.5)',
                                                'rgba(54, 162, 235, 0.5)',
                                                'rgba(255, 206, 86, 0.5)',
                                                'rgba(75, 192, 192, 0.5)',
                                                'rgba(153, 102, 255, 0.5)'
                                            ],
                                            borderColor: [
                                                'rgba(255, 99, 132, 1)',
                                                'rgba(54, 162, 235, 1)',
                                                'rgba(255, 206, 86, 1)',
                                                'rgba(75, 192, 192, 1)',
                                                'rgba(153, 102, 255, 1)'
                                            ],
                                            borderWidth: 1
                                        }]
                                    },
                                    options: {
                                        responsive: true,
                                        maintainAspectRatio: false
                                    }
                                });
                                
                                return () => chart.destroy();
                            }, [planData]), null}
                        </div>
                        
                        <div className="bg-white shadow rounded-lg p-6">
                            <h3 className="text-lg font-semibold mb-4">Reports</h3>
                            <div className="space-y-2">
                                <button className="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-left">
                                    Monthly Revenue Report
                                </button>
                                <button className="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-left">
                                    Client Status Report
                                </button>
                                <button className="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-left">
                                    Overdue Accounts Report
                                </button>
                                <button className="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-left">
                                    New Clients This Month
                                </button>
                                <button className="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-left">
                                    Client Usage Statistics
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // Settings Component
            const Settings = () => (
                <div className="bg-white shadow rounded-lg p-6 mb-6">
                    <h3 className="text-lg font-semibold mb-4">System Settings</h3>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 className="font-semibold mb-2">General Settings</h4>
                            <div className="mb-4">
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Company Name</label>
                                    <input type="text" className="border rounded px-3 py-2 w-full" defaultValue="My ISP Company" />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Currency</label>
                                    <select className="border rounded px-3 py-2 w-full" defaultValue="USD">
                                        <option value="USD">USD ($)</option>
                                        <option value="EUR">EUR (€)</option>
                                        <option value="GBP">GBP (£)</option>
                                    </select>
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Tax Rate (%)</label>
                                    <input type="number" className="border rounded px-3 py-2 w-full" defaultValue="10" />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Payment Due Days</label>
                                    <input type="number" className="border rounded px-3 py-2 w-full" defaultValue="15" />
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 className="font-semibold mb-2">Notification Settings</h4>
                            <div className="mb-4">
                                <div className="mb-2 flex items-center">
                                    <input type="checkbox" id="emailNotifications" className="mr-2" defaultChecked />
                                    <label htmlFor="emailNotifications">Email Notifications</label>
                                </div>
                                <div className="mb-2 flex items-center">
                                    <input type="checkbox" id="smsNotifications" className="mr-2" />
                                    <label htmlFor="smsNotifications">SMS Notifications</label>
                                </div>
                                <div className="mb-2 flex items-center">
                                    <input type="checkbox" id="lowBalanceAlert" className="mr-2" defaultChecked />
                                    <label htmlFor="lowBalanceAlert">Low Balance Alerts</label>
                                </div>
                                <div className="mb-2 flex items-center">
                                    <input type="checkbox" id="paymentReminders" className="mr-2" defaultChecked />
                                    <label htmlFor="paymentReminders">Payment Reminders</label>
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Reminder Days Before Due</label>
                                    <input type="number" className="border rounded px-3 py-2 w-full" defaultValue="5" />
                                </div>
                            </div>
                        </div>
                        
                        <div className="md:col-span-2">
                            <h4 className="font-semibold mb-2">Mikrotik Default Settings</h4>
                            <div className="mb-4">
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Default PPPoE Profile</label>
                                    <input type="text" className="border rounded px-3 py-2 w-full" defaultValue="pppoe-default" />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Default Hotspot Profile</label>
                                    <input type="text" className="border rounded px-3 py-2 w-full" defaultValue="hotspot-default" />
                                </div>
                                <div className="mb-2">
                                    <label className="block text-sm font-medium mb-1">Auto-Suspend After Days Overdue</label>
                                    <input type="number" className="border rounded px-3 py-2 w-full" defaultValue="7" />
                                </div>
                            </div>
                            
                            <div className="mt-4">
                                <button className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                                    Save Settings
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-100">
                    {/* Header */}
                    <header className="bg-white shadow">
                        <div className="max-w-7xl mx-auto px-4 py-6">
                            <div className="flex justify-between items-center">
                                <h1 className="text-3xl font-bold text-gray-900">ISP Billing System</h1>
                                <div className="text-sm">
                                    <p><strong>Router:</strong> {mikrotikConfig.status === 'Connected' ? 
                                        <span className="text-green-600">Connected</span> : 
                                        <span className="text-red-600">Disconnected</span>
                                    }</p>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    {/* Main Content */}
                    <main className="max-w-7xl mx-auto px-4 py-6">
                        {/* Alert Message */}
                        {showAlert && (
                            <div className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4">
                                {alertMessage}
                            </div>
                        )}
                        
                        {/* Navigation Tabs */}
                        <div className="flex overflow-x-auto mb-6 bg-white shadow rounded-lg p-1">
                            <button 
                                className={`px-4 py-2 mr-1 whitespace-nowrap rounded ${activeTab === 'dashboard' ? 'bg-blue-500 text-white' : 'hover:bg-gray-100'}`}
                                onClick={() => setActiveTab('dashboard')}
                            >
                                Dashboard
                            </button>
                            <button 
                                className={`px-4 py-2 mr-1 whitespace-nowrap rounded ${activeTab === 'clients' ? 'bg-blue-500 text-white' : 'hover:bg-gray-100'}`}
                                onClick={() => setActiveTab('clients')}
                            >
                                Clients
                            </button>
                            <button 
                                className={`px-4 py-2 mr-1 whitespace-nowrap rounded ${activeTab === 'plans' ? 'bg-blue-500 text-white' : 'hover:bg-gray-100'}`}
                                onClick={() => setActiveTab('plans')}
                            >
                                Plans
                            </button>
                            <button 
                                className={`px-4 py-2 mr-1 whitespace-nowrap rounded ${activeTab === 'payments' ? 'bg-blue-500 text-white' : 'hover:bg-gray-100'}`}
                                onClick={() => setActiveTab('payments')}
                            >
                                Payments
                            </button>
                            <button 
                                className={`px-4 py-2 mr-1 whitespace-nowrap rounded ${activeTab === 'mikrotik' ? 'bg-blue-500 text-white' : 'hover:bg-gray-100'}`}
                                onClick={() => setActiveTab('mikrotik')}
                            >
                                Mikrotik
                            </button>
                            <button 
                                className={`px-4 py-2 mr-1 whitespace-nowrap rounded ${activeTab === 'reports' ? 'bg-blue-500 text-white' : 'hover:bg-gray-100'}`}
                                onClick={() => setActiveTab('reports')}
                            >
                                Reports
                            </button>
                            <button 
                                className={`px-4 py-2 whitespace-nowrap rounded ${activeTab === 'settings' ? 'bg-blue-500 text-white' : 'hover:bg-gray-100'}`}
                                onClick={() => setActiveTab('settings')}
                            >
                                Settings
                            </button>
                        </div>
                        
                        {/* Tab Content */}
                        {activeTab === 'dashboard' && <Dashboard />}
                        {activeTab === 'clients' && <Clients />}
                        {activeTab === 'clientDetails' && <ClientDetails />}
                        {activeTab === 'addClient' && <AddClient />}
                        {activeTab === 'plans' && <Plans />}
                        {activeTab === 'payments' && <Payments />}
                        {activeTab === 'mikrotik' && <MikrotikSetup />}
                        {activeTab === 'reports' && <Reports />}
                        {activeTab === 'settings' && <Settings />}
                    </main>
                    
                    {/* Footer */}
                    <footer className="bg-white shadow mt-auto">
                        <div className="max-w-7xl mx-auto px-4 py-6">
                            <p className="text-center text-gray-500">ISP Billing System v1.0 © {new Date().getFullYear()}</p>
                        </div>
                    </footer>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>